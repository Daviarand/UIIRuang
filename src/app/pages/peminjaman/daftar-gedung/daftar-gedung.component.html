<div class="page-content">
    <!-- Main Content Card -->
    <div class="content-card">
        <h1 class="page-title">Peminjaman</h1>

        <!-- Yellow Line under title -->
        <div class="title-underline"></div>

        <!-- View Toggle & Controls -->
        <div class="controls-row">
            <div class="left-controls">
                <!-- Grid/Tabel Toggle -->
                <div class="btn-toggle-group">
                    <button class="btn-toggle" [class.active]="viewMode === 'grid'" (click)="setViewMode('grid')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                            fill="currentColor">
                            <path
                                d="M4 4h4v4H4V4zm6 0h4v4h-4V4zm6 0h4v4h-4V4zM4 10h4v4H4v-4zm6 0h4v4h-4v-4zm6 0h4v4h-4v-4zM4 16h4v4H4v-4zm6 0h4v4h-4v-4zm6 0h4v4h-4v-4z" />
                        </svg>
                        Grid
                    </button>
                    <button class="btn-toggle" [class.active]="viewMode === 'tabel'" (click)="setViewMode('tabel')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                            fill="currentColor">
                            <path
                                d="M3 5v14h18V5H3zm4 2v2H5V7h2zm-2 6v-2h2v2H5zm0 2h2v2H5v-2zm14 2H9v-2h10v2zm0-4H9v-2h10v2zm0-4H9V7h10v2z" />
                        </svg>
                        Tabel
                    </button>
                </div>
            </div>
        </div>

        <!-- Filter Row -->
        <div class="filter-row">
            <div class="filter-left">
                <span>Tampilkan</span>
                <select class="form-select" [(ngModel)]="itemsPerPage">
                    <option [value]="10">10</option>
                    <option [value]="25">25</option>
                    <option [value]="50">50</option>
                </select>
                <span class="data-info">data | Total {{ totalData }} data</span>
            </div>
            <div class="filter-right">
                <div class="input-group">
                    <input type="text" class="form-input" placeholder="Cari" [value]="searchQuery"
                        (input)="onSearch($event)">
                    <button class="btn-search">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                            fill="currentColor">
                            <path
                                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Grid View -->
        <div class="gedung-grid" *ngIf="viewMode === 'grid'">
            <div class="gedung-card" *ngFor="let gedung of filteredGedung" (click)="navigateToRuangan(gedung)">
                <div class="gedung-image">
                    <img [src]="gedung.gambar" [alt]="gedung.nama" onerror="this.src='assets/images/placeholder.jpg'">
                </div>
                <div class="gedung-info">
                    <h3 class="gedung-name">{{ gedung.nama }}</h3>
                    <div class="gedung-detail">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"
                            fill="#dc3545">
                            <path
                                d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" />
                        </svg>
                        <span>{{ gedung.lokasi }}</span>
                    </div>
                    <div class="gedung-detail">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"
                            fill="#1e3a8a">
                            <path
                                d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z" />
                        </svg>
                        <span>{{ gedung.jumlahLantai }} lantai</span>
                    </div>
                    <div class="gedung-detail">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"
                            fill="#1e3a8a">
                            <path
                                d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14h-2V7h2v10z" />
                        </svg>
                        <span>{{ gedung.jumlahRuangan }} ruang</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Table View -->
        <div class="gedung-table-wrapper" *ngIf="viewMode === 'tabel'">
            <table class="table">
                <thead>
                    <tr>
                        <th>No</th>
                        <th>Nama Gedung</th>
                        <th>Lokasi Gedung</th>
                        <th>Jumlah Lantai</th>
                        <th>Jumlah Ruangan</th>
                        <th>Aksi</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let gedung of filteredGedung; let i = index">
                        <td>{{ i + 1 }}</td>
                        <td>{{ gedung.nama }}</td>
                        <td>{{ gedung.lokasi }}</td>
                        <td>{{ gedung.jumlahLantai }}</td>
                        <td>{{ gedung.jumlahRuangan }}</td>
                        <td>
                            <button class="btn btn-primary btn-sm" (click)="navigateToRuangan(gedung)">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"
                                    fill="currentColor">
                                    <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z" />
                                </svg>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>