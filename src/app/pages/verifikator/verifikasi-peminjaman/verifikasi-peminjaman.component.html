<div class="detail-container">
    <!-- Page Header -->
    <div class="page-header">
        <h2 class="page-title">Verifikasi peminjaman</h2>
    </div>

    <!-- Detail Ruang Section -->
    <div class="card-section">
        <div class="section-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path
                    d="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z" />
            </svg>
            <span>Detail ruang</span>
        </div>
        <div class="info-grid">
            <span class="info-label">Nama ruang</span>
            <span class="info-value">{{ detailData?.room.name }}</span>

            <span class="info-label">Unit pemilik</span>
            <span class="info-value">{{ detailData?.room.unit }}</span>

            <span class="info-label">Gedung</span>
            <span class="info-value">{{ detailData?.room.building }}</span>

            <span class="info-label">Lantai</span>
            <span class="info-value">{{ detailData?.room.floor }}</span>

            <span class="info-label">Lokasi</span>
            <span class="info-value">{{ detailData?.room.location }}</span>

            <span class="info-label">Jenis ruang</span>
            <span class="info-value">{{ detailData?.room.type }}</span>

            <span class="info-label">Kapasitas</span>
            <span class="info-value">{{ detailData?.room.capacity }}</span>
        </div>
    </div>

    <!-- Detail Peminjaman Section -->
    <div class="card-section">
        <div class="section-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path
                    d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z" />
            </svg>
            <span>Detail peminjaman</span>
        </div>
        <div class="info-grid">
            <span class="info-label">Nama penanggung jawab</span>
            <span class="info-value">{{ detailData?.borrower.name }}</span>

            <span class="info-label">Nomor WA</span>
            <span class="info-value">{{ detailData?.borrower.whatsapp }}</span>

            <span class="info-label">Nama acara</span>
            <span class="info-value">{{ detailData?.borrower.eventName }}</span>

            <span class="info-label">Kategori</span>
            <span class="info-value">{{ detailData?.borrower.eventType }}</span>

            <span class="info-label">Jumlah peserta</span>
            <span class="info-value">{{ detailData?.borrower.participants }} peserta</span>

            <span class="info-label">Deskripsi</span>
            <span class="info-value-full">{{ detailData?.borrower.description }}</span>

            <span class="info-label">Tambahan fasilitas</span>
            <span class="info-value">{{ detailData?.borrower.facilities }}</span>
        </div>

        <!-- Dokumen Pendukung Accordion (OPEN by default) -->
        <div class="accordion-item" *ngIf="detailData?.borrower.documentUrl">
            <div class="accordion-header" (click)="isDocExpanded = !isDocExpanded">
                <span>Dokumen pendukung</span>
                <svg class="accordion-icon" [class.rotate]="isDocExpanded" xmlns="http://www.w3.org/2000/svg" width="16"
                    height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="6 9 12 15 18 9"></polyline>
                </svg>
            </div>
            <div class="accordion-content" *ngIf="isDocExpanded">
                <img [src]="detailData?.borrower.documentUrl" alt="Dokumen Pendukung" class="doc-image">
            </div>
        </div>
    </div>

    <!-- Waktu Acara Section -->
    <div class="card-section">
        <div class="section-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path
                    d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z" />
            </svg>
            <span>Waktu acara</span>
        </div>
        <div class="info-grid">
            <span class="info-label">Hari 1</span>
            <span class="info-value">{{ detailData?.time.day1 }}</span>

            <span class="info-label">Hari 2</span>
            <span class="info-value">{{ detailData?.time.day2 }}</span>
        </div>
    </div>

    <!-- Verifikasi Peminjaman Ruang Section -->
    <div class="verification-card">
        <div class="verification-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                <polyline points="22 4 12 14.01 9 11.01"></polyline>
                <line x1="8" y1="12" x2="16" y2="12"></line>
                <line x1="12" y1="8" x2="12" y2="16"></line>
            </svg>
            <span>Verifikasi peminjaman ruang</span>
        </div>

        <div class="form-group-radio">
            <label class="radio-option">
                <input type="radio" name="status" value="Diterima" [(ngModel)]="verificationStatus">
                Diterima
            </label>
            <label class="radio-option">
                <input type="radio" name="status" value="Ditolak" [(ngModel)]="verificationStatus">
                Ditolak
            </label>
        </div>

        <div class="form-group note-input" *ngIf="verificationStatus === 'Ditolak'">
            <textarea placeholder="Catatan alasan penolakan" [(ngModel)]="rejectionNote"></textarea>
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
        <button class="btn btn-cancel" (click)="onCancel()">Batal</button>
        <button class="btn btn-save" [class.active]="verificationStatus" (click)="onSaveClick()">Simpan</button>
    </div>
</div>

<!-- Confirmation Modal -->
<div class="modal-overlay" *ngIf="showConfirmationModal" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none">
                <circle cx="12" cy="12" r="10" stroke="#ffc107" stroke-width="2" fill="#fff" />
                <text x="12" y="17" text-anchor="middle" font-size="14" font-weight="bold" fill="#ffc107">?</text>
            </svg>
        </div>

        <h2 class="modal-title">Apakah Anda yakin?</h2>
        <p class="modal-subtitle">Pastikan data verifikasi yang Anda lihat sudah sesuai.</p>

        <div class="modal-actions">
            <button class="btn btn-outline" (click)="closeModal()">Kembali</button>
            <button class="btn btn-primary" (click)="confirmVerification()">Ya, simpan</button>
        </div>
    </div>
</div>